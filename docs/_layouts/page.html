---
layout: default
---
<article class="post">

  <header class="post-header">
    <h1 class="post-title">{{ page.title | escape }}</h1>
  </header>

  <div class="post-content">
    {{ content }}
  </div>

  {%- if page.title == "User Guide" or page.title == "Developer Guide" -%}
  <div id="sidebar-bg" onclick="closeSidebar()">
    <div id="sidebar" class="hidden-print">
    {% include toc.html html=content %}
    </div>
  </div>
  <div class="toc-button hidden-print" onclick="handleSidebar()">
    <svg id="open-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="#ffffff">
      <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
    </svg>
    <svg id="close-icon" class="hide" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="#ffffff">
      <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
    </svg>
  </div>
  {%- endif -%}

</article>
{%- if page.title == "User Guide" or page.title == "Developer Guide" -%}
<script>
  const button = document.querySelector(".toc-button")
  button.style.opacity = "0";
  const post = document.querySelector(".post")
  const content = document.querySelector(".post-content")
  const header = document.querySelector(".post-title")
  const sidebar = document.querySelector("#sidebar")
  const sidebarBg = document.querySelector("#sidebar-bg")
  const openIcon = document.querySelector("#open-icon")
  const closeIcon = document.querySelector("#close-icon")
  sidebar.children[0].id = "sidebar-toc" // set id of sidebar ul
  let height = header.offsetHeight + 140 // adjustment for margins
  for (let i = 0; i < content.children.length; ++i) {
    if (content.children[i].tagName === "HR") {
      break;
    }
    height += content.children[i].offsetHeight
  }
  window.onscroll = function () {
    if (document.body.scrollTop > height || document.documentElement.scrollTop > height) {
      button.style.opacity = "1";
    } else {
      button.style.opacity = "0";
      closeSidebar();
    }
  }

  function handleSidebar() {
    return sidebar.offsetWidth > 0 ? closeSidebar() : openSidebar();
  }

  function closeSidebar() {
    sidebar.style.width = "0";
    closeIcon.classList.add("hide")
    openIcon.classList.remove("hide")
    sidebarBg.style.opacity = "0";
    sidebarBg.style.zIndex = "-1";
  }

  function openSidebar() {
    if (window.innerWidth < 440) {
      sidebar.style.width = window.innerWidth + "px"
    } else {
      sidebar.style.width = "440px";
    }
    sidebarBg.style.opacity = "1";
    sidebarBg.style.zIndex = "1";
    closeIcon.classList.remove("hide")
    openIcon.classList.add("hide")
  }
</script>
{%- endif -%}
